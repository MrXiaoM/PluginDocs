---
title: 依赖版本重载
date: 2026-01-07 14:55:03
permalink: /elopers/base/resolver-override
---

[<< 返回开发文档](/elopers/base/intro)

## 依赖版本重载

在这里存放用于 LibrariesResolver-Lite 的依赖版本重载配置，具体用法如下
```java
// 在 resolver.doResolve() 之前读取并添加依赖位置重载配置
YamlConfiguration overrideLibraries = ConfigUtils.load(resolve("./.override-libraries.yml"));
for (String key : overrideLibraries.getKeys(false)) {
    resolver.getStartsReplacer().put(key, overrideLibraries.getString(key));
}
resolver.addResolvedLibrary(BuildConstants.RESOLVED_LIBRARIES);

List<URL> libraries = resolver.doResolve();
```

因为有用户反馈，在特殊情况下，adventure 会跟其它插件冲突导致插件无法启用，但是我又无法复现这个问题。于是决定编写配置，允许用户修改依赖版本。

当出现依赖冲突时，从下面复制配置，添加到插件数据目录下的 `override-libraries.yml` 中即可。

## 如何生成配置？

```kotlin
// build.gradle.kts
buildscript {
    repositories.mavenCentral()
    dependencies.classpath("top.mrxiaom:LibrariesResolver-Gradle:1.7.3")
}
val base = top.mrxiaom.gradle.LibraryHelper(project)
dependencies {
    val adventure = "4.11.0" // adventure 版本
    base.library("net.kyori:adventure-api:$adventure")
    base.library("net.kyori:adventure-text-minimessage:$adventure")
    // 下面还可以添加更多依赖
}
base.collectLibraries<String> { dep ->
    val groupPath = dep.moduleGroup.replace('.', '/')
    val key = "${groupPath}/${dep.moduleName}/"
    val value = top.mrxiaom.gradle.LibraryHelper.defaultCollector().apply(dep)
    if (value != null) "'$key': '$value'" else null
}.forEach(::println) // 打印到控制台，然后从控制台复制配置即可
```

请手动从结果中去除 `annotations` 等不必要依赖。

## adventure 4.11.0
```yaml
'net/kyori/adventure-api/': 'net/kyori/adventure-api/4.11.0/adventure-api-4.11.0.jar'
'net/kyori/adventure-key/': 'net/kyori/adventure-key/4.11.0/adventure-key-4.11.0.jar'
'net/kyori/examination-string/': 'net/kyori/examination-string/1.3.0/examination-string-1.3.0.jar'
'net/kyori/examination-api/': 'net/kyori/examination-api/1.3.0/examination-api-1.3.0.jar'
'net/kyori/adventure-text-minimessage/': 'net/kyori/adventure-text-minimessage/4.11.0/adventure-text-minimessage-4.11.0.jar'
```

## adventure 4.17.0
```yaml
'net/kyori/adventure-api/': 'net/kyori/adventure-api/4.17.0/adventure-api-4.17.0.jar'
'net/kyori/adventure-key/': 'net/kyori/adventure-key/4.17.0/adventure-key-4.17.0.jar'
'net/kyori/examination-string/': 'net/kyori/examination-string/1.3.0/examination-string-1.3.0.jar'
'net/kyori/examination-api/': 'net/kyori/examination-api/1.3.0/examination-api-1.3.0.jar'
'net/kyori/adventure-text-minimessage/': 'net/kyori/adventure-text-minimessage/4.17.0/adventure-text-minimessage-4.17.0.jar'
```
